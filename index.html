<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>האתר של דורון דנאי — Master Page</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root { --bg:#000; --fg:#f4f4f4; --muted:#aaa; --ok:#a9f3a9; --bad:#ff9b9b; }
    html, body { margin:0; height:100%; background:var(--bg); color:var(--fg); overflow:hidden; }
    .stage { position:fixed; inset:0; display:grid; place-items:center; background:var(--bg); }
    img#master { max-width:100vw; max-height:100vh; object-fit:contain; display:none; }
    .panel {
      position:fixed; inset-inline-start:10px; inset-block-start:10px;
      width:min(560px,92vw); max-height:62vh; overflow:auto;
      background:rgba(0,0,0,.62); border:1px solid rgba(255,255,255,.15);
      border-radius:12px; padding:10px 12px; font:13px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      backdrop-filter: blur(4px);
    }
    .panel h3 { margin:4px 0 8px; font-size:14px; }
    .attempts { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; white-space:nowrap; }
    .ok { color:var(--ok); }
    .bad { color:var(--bad); }
    .hint {
      position:fixed; inset-inline-start:10px; inset-block-end:10px;
      display:grid; grid-template-columns:1fr auto auto; gap:6px; align-items:center;
      background:rgba(0,0,0,.62); border:1px solid rgba(255,255,255,.15); border-radius:12px;
      padding:8px 10px; font:13px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      width:min(540px,95vw);
    }
    .hint input {
      width:100%; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.18);
      color:var(--fg); border-radius:10px; padding:8px 10px; font:inherit;
    }
    .hint button { padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.08); color:var(--fg); cursor:pointer; }
    .hint .ver { padding-inline:10px; opacity:.75; user-select:none; }
    .hidden { display:none !important; }
    .logo { position:fixed; inset-inline-end:10px; inset-block-start:10px; font-size:12px; opacity:.7; }
  </style>
</head>
<body>
  <div class="stage"><img id="master" alt="Master Page"></div>

  <div class="panel" id="panel">
    <h3>טוען "Master Page.jpg"…</h3>
    <div>ניסיונות טעינה (לפי סדר):</div>
    <div class="attempts" id="attempts"></div>
    <div style="margin-top:8px;color:var(--muted)">
      כל הקבצים אמורים להסתיים ב-<b>.jpg</b> ולשמור על אותיות גדולות/קטנות ורווחים בדיוק כמו ברשימה שסיפקת.
      אם שינית שם/תיקייה — השתמש בבודק הידני למטה או עדכן את שם הקובץ בריפו.
    </div>
  </div>
  <div class="hint">
    <input id="manual" placeholder="בדיקה ידנית: הקלד/י נתיב מדויק, למשל img/Master Page.jpg">
    <button id="tryBtn">נסה</button>
    <button id="bump">Bump v</button>
    <span class="ver" id="vshow">v=601</span>
  </div>

  <div class="logo">© Doron Danay</div>

  <script>
    (function() {
      const attemptsEl = document.getElementById('attempts');
      const img = document.getElementById('master');
      const panel = document.getElementById('panel');
      const manual = document.getElementById('manual');
      const tryBtn = document.getElementById('tryBtn');
      const bump = document.getElementById('bump');
      const vshow = document.getElementById('vshow');

      let v = 601;

      // exact names as provided (always .jpg, keep spaces & case)
      const exactFiles = [
        "Master Page.jpg",       // primary hero
        "coaching master.jpg",
        "Wings back.jpg",
        "Twins back.jpg",
        "Thats life final.jpg",
        "Talks.jpg",
        "Worn Wings back.jpg",
        "Wings front.jpg"
      ];

      // folders to try (exact case)
      const folders = ["", "img/", "IMG/", "images/", "Images/"];
      // Build candidate list: try Master Page first across all folders, then others
      const candidates = [];
      for (const folder of folders) candidates.push(folder + exactFiles[0]);
      for (let i = 1; i < exactFiles.length; i++) {
        for (const folder of folders) candidates.push(folder + exactFiles[i]);
      }

      function addLine(text, ok=false) {
        const div = document.createElement('div');
        div.textContent = (ok ? "✓ " : "× ") + text;
        div.className = ok ? "ok" : "bad";
        attemptsEl.appendChild(div);
        attemptsEl.scrollTop = attemptsEl.scrollHeight;
      }

      function tryLoad(srcList, idx=0) {
        if (idx >= srcList.length) {
          addLine("לא נמצאה תמונה תואמת. בדוק שהקבצים באמת .jpg ושמותיהם מדויקים.", false);
          panel.querySelector('h3').textContent = "שגיאה: לא נמצאה תמונה";
          return;
        }
        const raw = srcList[idx];
        const url = `${raw}?v=${v}`;
        const testImg = new Image();
        let settled = false;

        const onFail = () => {
          if (settled) return;
          settled = true;
          addLine(url, false);
          tryLoad(srcList, idx+1);
        };
        const onOk = () => {
          if (settled) return;
          settled = true;
          addLine(url, true);
          img.src = url;
          img.style.display = 'block';
          panel.classList.add('hidden');
          document.title = "האתר של דורון דנאי — " + raw.replace(/\?.*$/, "");
        };

        testImg.onload = () => (testImg.naturalWidth ? onOk() : onFail());
        testImg.onerror = onFail;
        const T = setTimeout(onFail, 6000);
        testImg.onloadend = () => clearTimeout(T);
        testImg.src = url;
      }
      // Manual tester
      tryBtn.addEventListener('click', () => {
        const path = manual.value.trim();
        if (!path) return;
        attemptsEl.innerHTML = "";
        panel.classList.remove('hidden');
        img.style.display = 'none';
        tryLoad([path]);
      });

      // Bump cache-busting version
      bump.addEventListener('click', () => {
        v += 1;
        vshow.textContent = `v=${v}`;
        // Re-try from start using the bumped version
        attemptsEl.innerHTML = "";
        panel.classList.remove('hidden');
        img.style.display = 'none';
        tryLoad(candidates);
      });

      // Kickoff
      tryLoad(candidates);
    })();
  </script>
</body>
</html>
