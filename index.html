<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>האתר של דורון דנאי — Master Page</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root { --bg:#000; --fg:#f4f4f4; --muted:#aaa; --ok:#a9f3a9; --bad:#ff9b9b; }
    html, body { margin:0; height:100%; background:var(--bg); color:var(--fg); overflow:hidden; }
    .stage { position:fixed; inset:0; display:grid; place-items:center; background:var(--bg); }
    img#master { max-width:100vw; max-height:100vh; object-fit:contain; display:none; }

    /* לוח ניסיונות טעינת התמונה */
    .panel {
      position:fixed; inset-inline-start:10px; inset-block-start:10px;
      width:min(560px,92vw); max-height:62vh; overflow:auto;
      background:rgba(0,0,0,.62); border:1px solid rgba(255,255,255,.15);
      border-radius:12px; padding:10px 12px; font:13px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      backdrop-filter: blur(4px);
    }
    .panel h3 { margin:4px 0 8px; font-size:14px; }
    .attempts { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; white-space:nowrap; }
    .ok { color:var(--ok); }
    .bad { color:var(--bad); }

    /* סרגל בדיקה ידנית ושבירת קאש */
    .hint {
      position:fixed; inset-inline-start:10px; inset-block-end:10px;
      display:grid; grid-template-columns:1fr auto auto; gap:6px; align-items:center;
      background:rgba(0,0,0,.62); border:1px solid rgba(255,255,255,.15); border-radius:12px;
      padding:8px 10px; font:13px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      width:min(540px,95vw);
    }
    .hint input {
      width:100%; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.18);
      color:var(--fg); border-radius:10px; padding:8px 10px; font:inherit;
    }
    .hint button { padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.08); color:var(--fg); cursor:pointer; }
    .hint .ver { padding-inline:10px; opacity:.75; user-select:none; }
    .hidden { display:none !important; }

    /* שכבת ה-HOTSPOTS */
    .hotspots { position:fixed; inset:0; pointer-events:none; }
    .hotspot {
      position:absolute; pointer-events:auto; cursor:pointer;
      outline: none; text-decoration:none;
      /* להדגשת המסגרות זמנית, בטל הערות: */
      /* background: rgba(0,255,255,.18); border: 1px dashed rgba(0,255,255,.6); */
    }
    .hotspot:focus-visible { outline: 2px solid #7cc1ff; outline-offset: 2px; }

    /* חלונות פרטים */
    dialog.modal {
      border: none; padding: 0; background: transparent;
    }
    dialog::backdrop { background: rgba(0,0,0,.6); }
    .dlg {
      position: fixed; inset: 5% 5% auto 5%;
      background: #111; color:#f5f5f5; border-radius: 14px; box-shadow: 0 10px 40px rgba(0,0,0,.6);
      max-width: 90vw; max-height: 90vh; overflow: hidden; display: grid; grid-template-rows: auto 1fr auto;
    }
    .dlg-head {
      padding: 10px 14px; display:flex; align-items:center; justify-content:space-between;
      border-bottom: 1px solid rgba(255,255,255,.12);
    }
    .dlg-body { padding: 10px; overflow:auto; background:#000; }
    .dlg-body img { max-width:100%; height:auto; display:block; margin: 0 auto; object-fit: contain; }
    .dlg-foot {
      padding: 10px; display:flex; gap:8px; justify-content:flex-end;
      border-top: 1px solid rgba(255,255,255,.12); background:#111;
    }
    .btn {
      padding: 8px 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06); color: #fff; cursor: pointer; text-decoration: none; display:inline-flex; align-items:center; gap:6px;
    }
    .btn.primary { background: rgba(0,153,255,.25); }
    .btn.green { background: rgba(0,180,0,.28); }
    .logo { position:fixed; inset-inline-end:10px; inset-block-start:10px; font-size:12px; opacity:.7; }
  </style>
</head>
<body>
  <div class="stage"><img id="master" alt="Master Page"></div>

  <div class="panel" id="panel">
    <h3>טוען "Master Page.jpg"…</h3>
    <div>ניסיונות טעינה (לפי סדר):</div>
    <div class="attempts" id="attempts"></div>
    <div style="margin-top:8px;color:var(--muted)">
      כל הקבצים אמורים להסתיים ב-<b>.jpg</b> ולשמור על אותיות גדולות/קטנות ורווחים בדיוק כמו ברשימה שסיפקת.
      אם שינית שם/תיקייה — השתמש בבודק הידני למטה או עדכן את שם הקובץ בריפו.
    </div>
  </div>
  <div class="hint">
    <input id="manual" placeholder="בדיקה ידנית: הקלד/י נתיב מדויק, למשל img/Master Page.jpg">
    <button id="tryBtn">נסה</button>
    <button id="bump">Bump v</button>
    <span class="ver" id="vshow">v=801</span>
  </div>

  <div class="logo">© Doron Danay</div>

  <!-- שכבת ה-HOTSPOTS -->
  <div class="hotspots" id="hotspots" aria-label="אזורי לחיצה שקופים"></div>

  <!-- חלונות פרטים -->
  <dialog id="dlg-coach" class="modal"><div class="dlg">
    <div class="dlg-head"><b>אימון אישי — פרטים</b><button class="btn" onclick="this.closest('dialog').close()">סגור</button></div>
    <div class="dlg-body"><img src="coaching master.jpg" alt="אימון אישי"></div>
    <div class="dlg-foot">
      <a class="btn primary" href="mailto:danaydoron@gmail.com?subject=%D7%90%D7%99%D7%9E%D7%95%D7%9F%20%D7%90%D7%99%D7%A9%D7%99&body=%D7%94%D7%99%D7%99%20%D7%93%D7%95%D7%A8%D7%95%D7%9F,%0A%D7%9E%D7%A2%D7%95%D7%A0%D7%99%D7%99%D7%9F/%D7%AA%20%D7%91%D7%A4%D7%A8%D7%98%D7%99%D7%9D%20%D7%A0%D7%95%D7%A1%D7%A4%D7%99%D7%9D%20%D7%A2%D7%9C%20%D7%90%D7%99%D7%9E%D7%95%D7%9F%20%D7%90%D7%99%D7%A9%D7%99." target="_blank" rel="noopener">יצירת קשר</a>
      <a class="btn" href="tel:+972542479911">☎ 054-2479911</a>
    </div>
  </div></dialog>

  <dialog id="dlg-talks" class="modal"><div class="dlg">
    <div class="dlg-head"><b>סדנאות/הרצאות — פרטים</b><button class="btn" onclick="this.closest('dialog').close()">סגור</button></div>
    <div class="dlg-body"><img src="Talks.jpg" alt="סדנאות/הרצאות"></div>
    <div class="dlg-foot">
      <a class="btn primary" href="mailto:danaydoron@gmail.com?subject=%D7%94%D7%A8%D7%A6%D7%90%D7%95%D7%AA%2F%D7%A1%D7%93%D7%A0%D7%90%D7%95%D7%AA%20-%20%D7%AA%D7%99%D7%90%D7%95%D7%9D&body=%D7%94%D7%99%D7%99%20%D7%93%D7%95%D7%A8%D7%95%D7%9F%2C%0A%D7%A0%D7%A9%D7%9E%D7%97%2F%D7%A0%D7%A9%D7%9E%D7%97%D7%94%20%D7%9C%D7%A4%D7%A8%D7%98%D7%99%D7%9D%20%D7%95%D7%AA%D7%90%D7%9D." target="_blank" rel="noopener">יצירת קשר</a>
      <a class="btn" href="tel:+972542479911">☎ 054-2479911</a>
    </div>
  </div></dialog>

  <dialog id="dlg-twins" class="modal"><div class="dlg">
    <div class="dlg-head"><b>צמד חמד — פרטים</b><button class="btn" onclick="this.closest('dialog').close()">סגור</button></div>
    <div class="dlg-body"><img src="Twins back.jpg" alt="צמד חמד — פרטים"></div>
    <div class="dlg-foot">
      <a class="btn primary" href="#" onclick="openBuy('buyTwins');return false;">רכישה</a>
      <a class="btn" href="mailto:danaydoron@gmail.com?subject=%D7%A6%D7%9E%D7%93%20%D7%97%D7%9E%D7%93%20-%20%D7%A4%D7%A8%D7%98%D7%99%D7%9D">יצירת קשר</a>
    </div>
  </div></dialog>

  <dialog id="dlg-worn" class="modal"><div class="dlg">
    <div class="dlg-head"><b>כנפיים שחוקות — פרטים</b><button class="btn" onclick="this.closest('dialog').close()">סגור</button></div>
    <div class="dlg-body"><img src="Worn Wings back.jpg" alt="כנפיים שחוקות — פרטים"></div>
    <div class="dlg-foot">
      <a class="btn primary" href="#" onclick="openBuy('buyWorn');return false;">רכישה</a>
      <a class="btn" href="mailto:danaydoron@gmail.com?subject=%D7%9B%D7%A0%D7%A4%D7%99%D7%99%D7%9D%20%D7%A9%D7%97%D7%95%D7%A7%D7%95%D7%AA%20-%20%D7%A4%D7%A8%D7%98%D7%99%D7%9D">יצירת קשר</a>
    </div>
  </div></dialog>

  <script>
    (function() {
      const attemptsEl = document.getElementById('attempts');
      const img = document.getElementById('master');
      const panel = document.getElementById('panel');
      const manual = document.getElementById('manual');
      const tryBtn = document.getElementById('tryBtn');
      const bump = document.getElementById('bump');
      const vshow = document.getElementById('vshow');
      const layer = document.getElementById('hotspots');

      let v = 801;

      /* קישורי רכישה — עדכן כאן אם יש שינוי */
      const LINKS = {
        // כנפיים שחוקות — על פי מה שסיפקת בעבר (אם שונה, תן לי הקישור המדויק ואעדכן)
        buyWorn: "https://pay.meshulam.co.il/purchase?b=8dfe116b4b9a656246375c897a49d9a4",
        // צמד חמד — TODO: ברגע שתספק קישור Meshulam אעדכן כאן
        buyTwins: ""
      };
      /* שמות הקבצים כפי שסיפקת (כולם .jpg) */
      const exactFiles = [
        "Master Page.jpg",       // hero
        "coaching master.jpg",
        "Wings back.jpg",
        "Twins back.jpg",
        "Thats life final.jpg",
        "Talks.jpg",
        "Worn Wings back.jpg",
        "Wings front.jpg"
      ];
      const folders = ["", "img/", "IMG/", "images/", "Images/"];

      /* HOTSPOTS באחוזים יחסית לתמונה */
      /* אפשר לכוונן — תגיד “+2% ימינה, -1% למעלה” וכו' ואכוון עבורך. */
      const hotspots = [
        // אימון אישי – "פרטים" (שמאל-תחתון)
        { id:"coach-details", left:12.0, top:73.0, width:12.0, height:7.0, action:() => openDialog('dlg-coach'), title:"אימון אישי — פרטים" },

        // הרצאות – "פרטים" (מרכז-תחתון)
        { id:"talks-details", left:42.0, top:76.0, width:12.0, height:7.0, action:() => openDialog('dlg-talks'), title:"סדנאות/הרצאות — פרטים" },

        // ספר “צמד חמד” — כפתור כחול "פרטים"
        { id:"twins-details", left:61.0, top:71.0, width:10.0, height:6.0, action:() => openDialog('dlg-twins'), title:"צמד חמד — פרטים" },
        // ספר “צמד חמד” — כפתור ירוק "רכישה"
        { id:"twins-buy",     left:70.0, top:71.0, width:7.0,  height:6.0, action:() => openBuy('buyTwins'), title:"צמד חמד — רכישה" },

        // ספר “כנפיים שחוקות” — כפתור כחול "פרטים"
        { id:"worn-details",  left:83.0, top:66.0, width:7.0, height:12.0, action:() => openDialog('dlg-worn'), title:"כנפיים שחוקות — פרטים" },
        // ספר “כנפיים שחוקות” — כפתור ירוק "רכישה"
        { id:"worn-buy",      left:90.0, top:65.0, width:7.0,  height:12.0, action:() => openBuy('buyWorn'), title:"כנפיים שחוקות — רכישה" }
      ];

      /* בניית רשימת הנסיונות לטעינת התמונה הראשית */
      const candidates = [];
      for (const folder of folders) candidates.push(folder + exactFiles[0]);
      for (let i = 1; i < exactFiles.length; i++) {
        for (const folder of folders) candidates.push(folder + exactFiles[i]);
      }

      function addLine(text, ok=false) {
        const div = document.createElement('div');
        div.textContent = (ok ? "✓ " : "× ") + text;
        div.className = ok ? "ok" : "bad";
        attemptsEl.appendChild(div);
        attemptsEl.scrollTop = attemptsEl.scrollHeight;
      }
      function tryLoad(srcList, idx=0) {
        if (idx >= srcList.length) {
          addLine("לא נמצאה תמונה תואמת. בדוק שהקבצים באמת .jpg ושמותיהם מדויקים.", false);
          panel.querySelector('h3').textContent = "שגיאה: לא נמצאה תמונה";
          return;
        }
        const raw = srcList[idx];
        const url = `${raw}?v=${v}`;
        const testImg = new Image();
        let settled = false;

        const onFail = () => { if (settled) return; settled = true; addLine(url, false); tryLoad(srcList, idx+1); };
        const onOk   = () => {
          if (settled) return; settled = true; addLine(url, true);
          img.src = url; img.style.display = 'block'; panel.classList.add('hidden');
          document.title = "האתר של דורון דנאי — " + raw.replace(/\?.*$/, "");
          requestAnimationFrame(layoutHotspots);
          window.addEventListener('resize', layoutHotspots);
        };

        testImg.onload = () => (testImg.naturalWidth ? onOk() : onFail());
        testImg.onerror = onFail;
        const T = setTimeout(onFail, 6000);
        testImg.onloadend = () => clearTimeout(T);
        testImg.src = url;
      }

      /* שרטוט המסגרות על התמונה (לפי bounding rect של התמונה) */
      function layoutHotspots() {
        const r = img.getBoundingClientRect();
        const layer = document.getElementById('hotspots');
        layer.innerHTML = "";
        hotspots.forEach(h => {
          const el = document.createElement('a');
          el.className = 'hotspot';
          el.setAttribute('aria-label', h.title);
          el.title = h.title;
          el.style.left   = (r.left + (h.left/100)*r.width) + 'px';
          el.style.top    = (r.top  + (h.top /100)*r.height) + 'px';
          el.style.width  = ((h.width /100)*r.width) + 'px';
          el.style.height = ((h.height/100)*r.height) + 'px';
          el.href = "javascript:void(0)";
          el.onclick = (e) => { e.preventDefault(); h.action && h.action(); };
          layer.appendChild(el);
        });
      }

      /* פתיחת חלונות וקישורי רכישה */
      window.openDialog = (id) => { document.getElementById(id)?.showModal(); };
      window.openBuy = (key) => {
        const url = (LINKS[key]||"").trim();
        if (!url) { alert("קישור רכישה עדיין לא הוגדר. שלח לי את הקישור ואעדכן."); return; }
        window.open(url, "_blank", "noopener");
      };

      // בדיקה ידנית וכפתור Bump
      document.getElementById('tryBtn').addEventListener('click', () => {
        const path = manual.value.trim(); if (!path) return;
        attemptsEl.innerHTML = ""; panel.classList.remove('hidden'); img.style.display = 'none';
        tryLoad([path]);
      });
      document.getElementById('bump').addEventListener('click', () => {
        v += 1; vshow.textContent = `v=${v}`;
        attemptsEl.innerHTML = ""; panel.classList.remove('hidden'); img.style.display = 'none';
        tryLoad(candidates);
      });

      // התחלה
      tryLoad(candidates);
    })();
  </script>
</body>
</html>







